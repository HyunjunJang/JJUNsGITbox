<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div>
        <h1>할일 목록 만들기</h1>
    </div>

    <div id="namebar">
        <input type="text" id="name" placeholder="이름을 입력하세요">
        <button type="button" id="btn1">확인</button>
    </div>
    <div>
        <input type="text" id="todo" placeholder="할일을 입력하세요">
        <button type="button" id="btn2">확인</button><br>
        <button type="button" id="removeAll">전체삭제하기</button>
        <ul id="list">
        </ul>
    </div>

    <script>
        var namebar = document.getElementById("namebar");
        var btn1 = document.getElementById("btn1");

        btn1.onclick = function () {
            var name = document.getElementById("name").value;

            var h2 = document.createElement("h2");
            h2.innerHTML = name + "님 안녕하세요";
            namebar.previousElementSibling.appendChild(h2);

            namebar.style.display = "none";
        }

        var btn2 = document.getElementById("btn2");
        var list = document.getElementById("list");

        function up(aaa){
            var par = document.getElementById("list");;
            var current = aaa.parentElement;
            var prev = current.previousElementSibling;

            if(prev===null){
                alert("위에 없잖아 안돼 돌아가")
                return;
            }
            if(confirm("올립니까?")){
            par.insertBefore(current, prev);
            } else{return}
        }
        function down(bbb){
            var par = document.getElementById("list");;
            var current = bbb.parentElement;
            var next = current.nextElementSibling;

            if(next==null){
                alert("안돼 돌아가")
                return;
            }
            if(confirm("내립니까?")){
                par.insertBefore(next, current);
            } else{return}
            
        }

        btn2.onclick = function () {
            var todo = document.getElementById("todo");
            var li = document.createElement("li");
            var btn = document.createElement("button");
            li.innerHTML = todo.value + "<button type='button' onclick='btnsremove(this)'>X</button><button type='button' onclick='up(this)'>위로</button><button type='button' onclick='down(this)'>아래로</button>";
            
            console.log(btn);
            list.appendChild(li);
            todo.value = "";
        }

        //전체 삭제

        var removeAll = document.getElementById("removeAll");
        removeAll.onclick = function () {

            if(confirm("정말로 삭제하십니까")){
                var num = list.children.length
                for(var i=0; i<num; i++){
                    list.children[0].remove();
                }
            } else {
                return;
            }
        }

        function btnsremove(ems) {
            ems.parentElement.remove();
        }
    </script>
</body>

</html>