<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        section {
            height: 1000px;
        }

        .canvas {
            border: 1px solid #000;
            width: 500px;
            height: 500px;
        }

        .box {
            background-color: red;
            width: 50px;
            height: 50px;
        }

        /* 박스를 옴기기 위한 중요한 디자인 */
        .canvas {
            position: relative;
        }

        .box {
            position: absolute;
            left: 0;
            top: 0;
        }
    </style>
</head>

<body>

    <h3>마우스이벤트를 활용한 박스 옴기기</h3>
    <section>
        <div class="canvas">
            <div class="box"><br>box</div>
        </div>
    </section>

    <script>
        var canvas = document.querySelector(".canvas");
        var box = document.querySelector(".box");
        var drag = false;
        var dev = {x:0, y:0}; //박스의 클릭한 고정 위치


        
        
        canvas.onmousemove = function () {
            if (event.target.className != "canvas") return;
            if (drag != true) return;
            //상자위치보정
            box.style.left = event.offsetX - dev.x + "px";
            box.style.top = event.offsetY - dev.y + "px";
        }
        
        canvas.onmousedown = function () {
            if(event.target.className != "box") return;
            drag=true; //움직일 수 있다는 의미
            
            //마우스가 꼭지점을 따라다니게 되는데 사용자가 누른 좌표를 고정한다
            dev.x = event.offsetX;
            dev.y = event.offsetY;
            console.log(event.offsetX);
            console.log(event.offsetY);
        }

        canvas.onmouseup = function(){
            drag = false;
        }
    </script>


</body>

</html>