<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <script>

        // fetch('example.txt').then(function (response) {
        //     response.text().then(function (data) {
        //         console.log(data);
        //     });
        // });

        //뜯어보기
        // fetch('읽어올주소') //fetch는 Promise객체를 반환합니다.
        //Promise 객체
        //1.pending - ing중(대기중)
        //2.fulfilled -성공함
        //3.reject - 거절당함


        // var promise = fetch('example.txt'); //Promise 객체 반환을 변수에 저장
        // console.log(promise);
        // //만약에 데이터를 읽어오는데에 300초가 걸리면, 코드가 진행되지 못하고 대기해야하니깐, then함수를 통해 콜백함수를 넣어주면
        // //요청이 완료되는대로, 콜백에 결과를 넣어서 반환해준다
        // //콜백함수 다시보기
        
        // promise.then(callback); //.then 함수와 콜백함수를 통해 Response 객체를 받아온다
        // function callback(response) {
        //     console.log(response);
        // };
        // //위 3줄을 점차 줄여나간다
        // promise.then(function(response) { //매개변수에 function 넣을 수 있다
        //     console.log(response);
        // });
        // //더 줄인다
        // fetch('example.txt').then(function (response) {
        //     console.log(response); //status가 200 이면 성공적, 400이면 실패 등등
        //     if(response.status == 200){ //따라서 200이면 응답에 성공했으니 작업을 수행해도 된다는 의미

        //     }
        // });

        // //3rd 실행순서 보기(콜백으로 인해 위에서부터 순서대로가 아니라 1, 3, 2 순으로 console.log 결과가 뜬다) -> 비동기적
        // console.log(1);
        // fetch('example.txt').then(function (response) {
        //     console.log(2);
        // })
        // console.log(3);

        // //4th
        // fetch('example.txt').then(function (response) {
        //     if(response.status == 200){
        //         console.log(response); //data는 body에 담겨있다
        //         response.text().then(function(data){

        //         }) //.text() 결과가 promise 객체이므로 then절(콜백함수) 사용가능
        //         //.text() 는 문자열로 형변환
        //         //.json() 은 오브젝트로 형변환
        //         //.formdata() 는 폼객체형태로 변환

        //     }
        // });

        // //5th - 콜백에서 return을 걸면 결과가 Promise를 반환하므로
        // // 계속 then절을 다시 사용할 수 있고, 그 결과를 반환할 수 있다
        // var x = fetch('example.txt').then(function (response) {
        //     return response.text();
        // })
        // // console.log(x);
        // .then(function(data){
        //     return data + "hello";
        // })
        // .then(function (data) {
        //     return data + "bye";
        // })
        // .then(function (data) {
        //     console.log(data);
        // })
        // //text 에서는 내가 추출하고자하는 데이터를 뽑는데에 힘들다

        //6nd - 따라서 서로 약속된 json or xml 형식을 사용한다
        fetch('example.json').then(function (response) {
            return response.json(); //json.parse 를 대신한다
        })
        .then(function (data) {
            console.log(data); //그 값을 확인
        })

    </script>
</body>

</html>